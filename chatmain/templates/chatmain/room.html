{% load static %}
{% csrf_token %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Chat Room</title>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{% static 'chatmain/chat.css' %}">


</head>
<body>

<div class="status-bar" id="status-bar">[CONNECTING] :: SERVER: <span id="server-ip"></span> :: ROOM: <span id="room-display"></span></div>
<label style="margin-left:auto; display:flex; align-items:center; gap:6px; cursor:pointer;">
    <input type="checkbox" id="theme-toggle">
    <span style="font-size: 13px;">Modern</span>
</label>
<div class="container">
    <div class="main-content">
        <div class="chat-box">
            <div id="chat-log" class="chat-log"></div>
        </div>

        <div class="image-box">
            <div id="chart-container" style="width: 100%; margin-bottom: 20px;">
<!--                <canvas id="neg-chart"></canvas>-->
<!--                <canvas id="neu-chart"></canvas>-->
<!--                <canvas id="pos-chart"></canvas>-->
                <canvas id="compound-bar-chart"></canvas>

                <canvas id="compound-curve-chart" ></canvas>
                <canvas id="polarity-bar-chart" ></canvas>

                <!--                <canvas id="ratio-bar" height="40" style="margin-top: 10px;"></canvas>-->
<!--                <canvas id="sum-bar" height="40" style="margin-bottom: 30px;"></canvas>-->
            </div>

            <img src="{% static 'chatmain/1.jpg' %}" alt="Sentiment Visualization" id="visbias-image">
            <label>Sentiment Analysis</label>
        </div>
    </div>
</div>

<div class="input-row">
    <div id="chat-input-wrapper" class="input-wrapper">
        <input id="chat-message-input" type="text" placeholder="Type your message here..." class="typing-cursor">
        <div id="input-overlay" class="input-overlay"></div>
    </div>   <input id="chat-message-submit" type="button" value="Send">
    <label><input type="checkbox" id="toggle-colorize" checked> Colorize Sentiment</label>
</div>
<div id="refine-popup" class="refine-popup" style="display:none; position:absolute;">
    <button data-dir="positive">More Positive</button>
    <button data-dir="negative">More Negative</button>
</div>

<div id="consent-modal" class="modal" style="display:none;">
    <div class="modal-content">
        <h2 id="consent-title" style="margin-top:0;">Consent Form<br>for Online Surveys Involving Personal Data</h2>
        <div id="consent-text-wrapper" style="overflow-y: auto; max-height: 300px; margin-bottom: 10px; padding: 10px;">
            <div id="consent-text"></div>
        </div>
        <div style="display: flex; gap: 10px; justify-content: flex-end;">
            <button id="consent-decline-btn" style="background-color: #ccc; color: #000;">Decline</button>
            <button id="consent-agree-btn">I Agree</button>
        </div>
    </div>
</div>
{{ room_name|json_script:"room-name" }}
<script src="{% static 'chatmain/theme.js' %}"></script>

<script src="{% static 'chatmain/chatws.js' %}"></script>

<script src="{% static 'chatmain/chartplay.js' %}"></script>
<script src="{% static 'chatmain/chat.js' %}"></script>

</body>
</html>
